<!DOCTYPE html><html lang="en-us"><head><link rel="shortcut icon" type="image/png" sizes="16x16" href="https://twitter.github.io/heron/img/favicon-16x16.png"><link rel="shortcut icon" type="image/png" sizes="32x32" href="https://twitter.github.io/heron/img/favicon-32x32.png"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="Hugo 0.25-DEV" /><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Heron"><meta property="og:image" content="/img/logo54x54.png"><meta property="og:url" content="https://twitter.github.io/heron"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@heronstreaming"><meta name="twitter:title" content="Heron"><meta name="twitter:image" content="/img/HeronTextLogo.png"><meta property="og:site_name" content="Heron Topologies"><meta property="og:url" content="/docs/concepts/topologies/"><meta property="og:description" content=""><meta name="twitter:description" content=""><title>Heron Documentation - Heron Topologies</title><link rel="stylesheet" href="https://twitter.github.io/heron/css/font-awesome.min.css"><link rel="stylesheet" href="https://twitter.github.io/heron/css/style.css"><script type="text/javascript">
var shiftWindow = function() { scrollBy(0, -100) };
window.addEventListener("hashchange", shiftWindow);
function load() { if (window.location.hash) shiftWindow(); }
</script></head><body class="body"><main class="main"><nav class="hn-top-navbar navbar navbar-inverse navbar-fixed-top" role="navigation"><div class="hn-navbar-container container-fluid"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#hn-navbar" aria-controls="hn-navbar" aria-expanded="false"><span class="sr-only"><Toggle>navigation</Toggle></span><i class="hn-toggle-button fa fa-bars"></i></button><a class="hn-navbar-logo navbar-brand" href="https://twitter.github.io/heron/"><img class="pull-left" src="https://twitter.github.io/heron/img/HeronTextLogo-small.png"></a></div><div id="hn-navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right"><li><a href="https://twitter.github.io/heron/docs/getting-started">Docs</a></li><li><a href="https://twitter.github.io/heron/docs/resources">Resources</a></li><li><a href="https://twitter.github.io/heron/docs/contributors/community">Community</a></li><li><a href="https://github.com/twitter/heron">GitHub</a></li><li><a href="https://groups.google.com/forum/#!forum/heron-users">Mailing List</a></li><li><a class="nav-icon" href="https://twitter.com/heronstreaming"><i class="fa fa-twitter"></i></a></li></ul></div></div></nav><div class="hn-main"><div class="container"><div class="row"><aside class="hn-sidebar hidden-xs hidden-sm col-md-4 col-lg-2"><nav class="hn-sidebar-nav"><div id="hn-accordion" class="panel-group" role="tablist" aria-multiselectable="true"><div class="panel panel-default"><section id="getting-started" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-getting-started" aria-labelledby="getting-started"><i class="fa fa-caret-right"></i>Getting Started</a></h4></section><div id="collapse-getting-started" class="panel-collapse collapse" aria-labelledby="getting-started"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/getting-started">Local (Single Node)</a></li><li><a href="https://twitter.github.io/heron/docs/migrate-storm-to-heron">Migrate Storm Topologies</a></li><li><a href="https://twitter.github.io/heron/docs/getting-started-troubleshooting">Troubleshooting Guide</a></li></ul></div></div></div><div class="panel panel-default"><section id="the-heron-streamlet-api" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-the-heron-streamlet-api" aria-labelledby="the-heron-streamlet-api"><i class="fa fa-caret-right"></i>The Heron Streamlet API</a></h4></section><div id="collapse-the-heron-streamlet-api" class="panel-collapse collapse" aria-labelledby="the-heron-streamlet-api"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/developers/java/streamlet-api">The Heron Streamlet API for Java</a></li></ul></div></div></div><div class="panel panel-default"><section id="the-heron-eco-api" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-the-heron-eco-api" aria-labelledby="the-heron-eco-api"><i class="fa fa-caret-right"></i>The Heron ECO API</a></h4></section><div id="collapse-the-heron-eco-api" class="panel-collapse collapse" aria-labelledby="the-heron-eco-api"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/developers/java/eco-api">The Heron ECO API for Java</a></li></ul></div></div></div><div class="panel panel-default"><section id="the-heron-topology-api" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-the-heron-topology-api" aria-labelledby="the-heron-topology-api"><i class="fa fa-caret-right"></i>The Heron Topology API</a></h4></section><div id="collapse-the-heron-topology-api" class="panel-collapse collapse" aria-labelledby="the-heron-topology-api"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/developers/java/topologies">The Heron Topology API for Java</a></li><li><a href="https://twitter.github.io/heron/docs/developers/java/effectively-once">Effectively-once Java topologies</a></li><li><a href="https://twitter.github.io/heron/docs/developers/python/topologies">Python Topologies</a></li><li><a href="https://twitter.github.io/heron/docs/developers/data-model">Heron Data Model</a></li><li><a href="https://twitter.github.io/heron/docs/developers/serialization">Tuple Serialization</a></li><li><a href="https://twitter.github.io/heron/docs/developers/ui-guide">Heron UI Guide</a></li><li><a href="https://twitter.github.io/heron/docs/developers/tuning">Tuning Guide</a></li><li><a href="https://twitter.github.io/heron/docs/developers/packing/ffdpacking">Packing Algorithms</a></li><li><a href="https://twitter.github.io/heron/docs/developers/simulator-mode">Simulator Mode</a></li><li><a href="https://twitter.github.io/heron/docs/developers/troubleshooting">Troubleshooting Guide</a></li></ul></div></div></div><div class="panel panel-default"><section id="client-api-docs" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-client-api-docs" aria-labelledby="client-api-docs"><i class="fa fa-caret-right"></i>Client API docs</a></h4></section><div id="collapse-client-api-docs" class="panel-collapse collapse" aria-labelledby="client-api-docs"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/api/java">Java</a></li><li><a href="https://twitter.github.io/heron/api/python">Python</a></li></ul></div></div></div><div class="panel panel-default"><section id="heron-concepts" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-heron-concepts" aria-labelledby="heron-concepts"><i class="fa fa-caret-right"></i>Heron Concepts</a></h4></section><div id="collapse-heron-concepts" class="panel-collapse collapse" aria-labelledby="heron-concepts"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/concepts/design-goals">Heron Design Goals</a></li><li><a href="https://twitter.github.io/heron/docs/concepts/topologies">Heron Topologies</a></li><li><a href="https://twitter.github.io/heron/docs/concepts/streamlet-api">Heron Streamlet API</a></li><li><a href="https://twitter.github.io/heron/docs/concepts/architecture">Heron Architecture</a></li><li><a href="https://twitter.github.io/heron/docs/concepts/delivery-semantics">Heron Delivery Semantics</a></li></ul></div></div></div><div class="panel panel-default"><section id="deployment" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-deployment" aria-labelledby="deployment"><i class="fa fa-caret-right"></i>Deployment</a></h4></section><div id="collapse-deployment" class="panel-collapse collapse" aria-labelledby="deployment"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/operators/deployment">Overview</a></li><li><a href="https://twitter.github.io/heron/docs/operators/deployment/configuration">Configuration</a></li><li><a href="https://twitter.github.io/heron/docs/operators/heron-api-server">The Heron API server</a></li></ul></div></div></div><div class="panel panel-default"><section id="state-managers" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-state-managers" aria-labelledby="state-managers"><i class="fa fa-caret-right"></i>State Managers</a></h4></section><div id="collapse-state-managers" class="panel-collapse collapse" aria-labelledby="state-managers"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/operators/deployment/statemanagers/zookeeper">Zookeeper</a></li><li><a href="https://twitter.github.io/heron/docs/operators/deployment/statemanagers/localfs">Local FS</a></li></ul></div></div></div><div class="panel panel-default"><section id="uploaders" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-uploaders" aria-labelledby="uploaders"><i class="fa fa-caret-right"></i>Uploaders</a></h4></section><div id="collapse-uploaders" class="panel-collapse collapse" aria-labelledby="uploaders"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/operators/deployment/uploaders/localfs">Local FS</a></li><li><a href="https://twitter.github.io/heron/docs/operators/deployment/uploaders/hdfs">HDFS</a></li><li><a href="https://twitter.github.io/heron/docs/operators/deployment/uploaders/s3">Amazon S3</a></li><li><a href="https://twitter.github.io/heron/docs/operators/deployment/uploaders/scp">Secure Copy (SCP)</a></li></ul></div></div></div><div class="panel panel-default"><section id="schedulers" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-schedulers" aria-labelledby="schedulers"><i class="fa fa-caret-right"></i>Schedulers</a></h4></section><div id="collapse-schedulers" class="panel-collapse collapse" aria-labelledby="schedulers"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/operators/deployment/schedulers/kubernetes">Kubernetes by Hand</a></li><li><a href="https://twitter.github.io/heron/docs/operators/deployment/schedulers/kubernetes-helm">Kubernetes with Helm</a></li><li><a href="https://twitter.github.io/heron/docs/operators/deployment/schedulers/aurora">Aurora Cluster</a></li><li><a href="https://twitter.github.io/heron/docs/operators/deployment/schedulers/standalone">Multi-node standalone cluster</a></li><li><a href="https://twitter.github.io/heron/docs/operators/deployment/schedulers/local">Local Cluster</a></li><li><a href="https://twitter.github.io/heron/docs/operators/deployment/schedulers/mesos-local-mac">Mesos Cluster Locally</a></li><li><a href="https://twitter.github.io/heron/docs/operators/deployment/schedulers/slurm">Slurm Cluster</a></li><li><a href="https://twitter.github.io/heron/docs/operators/deployment/schedulers/yarn">YARN Cluster</a></li></ul></div></div></div><div class="panel panel-default"><section id="cluster-configuration" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-cluster-configuration" aria-labelledby="cluster-configuration"><i class="fa fa-caret-right"></i>Cluster Configuration</a></h4></section><div id="collapse-cluster-configuration" class="panel-collapse collapse" aria-labelledby="cluster-configuration"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/operators/configuration/config-intro">Overview</a></li><li><a href="https://twitter.github.io/heron/docs/operators/configuration/system">System-Level</a></li><li><a href="https://twitter.github.io/heron/docs/operators/configuration/instance">Heron Instance</a></li><li><a href="https://twitter.github.io/heron/docs/operators/configuration/metrics-manager">Metrics Manager</a></li><li><a href="https://twitter.github.io/heron/docs/operators/configuration/stmgr">Stream Manager</a></li><li><a href="https://twitter.github.io/heron/docs/operators/configuration/tmaster">Topology Master</a></li></ul></div></div></div><div class="panel panel-default"><section id="observability" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-observability" aria-labelledby="observability"><i class="fa fa-caret-right"></i>Observability</a></h4></section><div id="collapse-observability" class="panel-collapse collapse" aria-labelledby="observability"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/operators/observability/prometheus">Prometheus</a></li><li><a href="https://twitter.github.io/heron/docs/operators/observability/graphite">Graphite</a></li><li><a href="https://twitter.github.io/heron/docs/operators/observability/scribe">Scribe</a></li></ul></div></div></div><div class="panel panel-default"><section id="user-manuals" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-user-manuals" aria-labelledby="user-manuals"><i class="fa fa-caret-right"></i>User Manuals</a></h4></section><div id="collapse-user-manuals" class="panel-collapse collapse" aria-labelledby="user-manuals"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/operators/heron-cli">Heron Client</a></li><li><a href="https://twitter.github.io/heron/docs/operators/heron-explorer">Heron Explorer</a></li><li><a href="https://twitter.github.io/heron/docs/operators/heron-tracker-api">Heron Tracker REST API</a></li><li><a href="https://twitter.github.io/heron/docs/operators/heron-tracker">Heron Tracker Runbook</a></li><li><a href="https://twitter.github.io/heron/docs/operators/heron-ui">Heron UI Runbook</a></li></ul></div></div></div><div class="panel panel-default"><section id="heron-developers" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-heron-developers" aria-labelledby="heron-developers"><i class="fa fa-caret-right"></i>Heron Developers</a></h4></section><div id="collapse-heron-developers" class="panel-collapse collapse" aria-labelledby="heron-developers"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/developers/compiling/compiling">Compiling</a></li><li><a href="https://twitter.github.io/heron/docs/developers/compiling/linux">Compiling on Linux</a></li><li><a href="https://twitter.github.io/heron/docs/developers/compiling/mac">Compiling on Mac OS X</a></li><li><a href="https://twitter.github.io/heron/docs/developers/compiling/docker">Compiling With Docker</a></li><li><a href="https://twitter.github.io/heron/docs/contributors/testing">Running Tests</a></li><li><a href="https://twitter.github.io/heron/docs/contributors/codebase">Code Organization</a></li></ul></div></div></div><div class="panel panel-default"><section id="extending-heron" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-extending-heron" aria-labelledby="extending-heron"><i class="fa fa-caret-right"></i>Extending Heron</a></h4></section><div id="collapse-extending-heron" class="panel-collapse collapse" aria-labelledby="extending-heron"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/contributors/custom-scheduler">Custom Scheduler</a></li><li><a href="https://twitter.github.io/heron/docs/contributors/custom-metrics-sink">Custom Metrics Sink</a></li></ul></div></div></div><div class="panel panel-default"><section id="heron-resources" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-heron-resources" aria-labelledby="heron-resources"><i class="fa fa-caret-right"></i>Heron Resources</a></h4></section><div id="collapse-heron-resources" class="panel-collapse collapse" aria-labelledby="heron-resources"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/resources">Heron Resources</a></li></ul></div></div></div><div class="panel panel-default"><section id="contributors" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-contributors" aria-labelledby="contributors"><i class="fa fa-caret-right"></i>Contributors</a></h4></section><div id="collapse-contributors" class="panel-collapse collapse" aria-labelledby="contributors"><div class="panel-body"><ul><li><a href="https://twitter.github.io/heron/docs/contributors/community">Community</a></li><li><a href="https://twitter.github.io/heron/docs/contributors/governance">Governance</a></li></ul></div></div></div></div></nav></aside><section class="hn-docs-main col-xs-12 col-sm-12 col-md-8 col-lg-10 col-md-offset-4 col-lg-offset-2"><header class="hn-docs-header page-header"><h1 class="hn-docs-title">Heron Topologies</h1><div class="hn-docs-description"></div></header><article class="hn-docs-content">


<div class="alert alert-success alert-dismissible" role="alert">
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button><h4 class="alert-heading">New Streamlet API for Heron</h4>As of version 0.16.0, Heron offers a new <strong>Streamlet API</strong> that you can use to write topologies in a more declarative, functional manner, without needing to specify spout and bolt logic directly. The Streamlet API is <strong>currently in beta</strong> and available for <a href="../../developers/java/streamlet-api">Java</a>. The Streamlet API for Python will be available soon.</p>

<p>More information on the Streamlet API can be found <a href="#the-heron-streamlet-api">below</a>.
</div>

<p>A Heron <strong>topology</strong> is a <a href="https://en.wikipedia.org/wiki/Directed_acyclic_graph">directed acyclic
graph</a> (DAG) used to process
streams of data. Topologies can be stateless or
<a href="../delivery-semantics#stateful-topologies">stateful</a> depending on your use case.</p>

<p>Heron topologies consist of two basic components:</p>

<ul>
<li><a href="#spouts">Spouts</a> inject data into Heron topologies, potentially from external sources like pub-sub messaging systems (Apache Kafka, Apache Pulsar, etc.)</li>
<li><a href="#bolts">Bolts</a> apply user-defined processing logic to data supplied by spouts</li>
</ul>

<p>Spouts and bolts are connected to one another via <strong>streams</strong> of data. Below is a
visual illustration of a simple Heron topology:</p>

<p><img src="https://twitter.github.io/heron/img/topology.png" alt="Heron topology" /></p>

<p>In the diagram above, spout <strong>S1</strong> feeds data to bolts <strong>B1</strong> and <strong>B2</strong> for
processing; in turn, bolt <strong>B1</strong> feeds processed data to bolts <strong>B3</strong> and
<strong>B4</strong>, while bolt <strong>B2</strong> feeds processed data to bolt <strong>B4</strong>. This is just a
simple example; you can create arbitrarily complex topologies in Heron.</p>

<h2 id="creating-topologies">Creating topologies</h2>

<p>There are currently two APIs available that you can use to build Heron topologies:</p>

<ol>
<li>The higher-level <a href="#the-heron-streamlet-api">Heron Streamlet API</a> (recommended for new topologies), which enables you to create topologies in a declarative, developer-friendly style inspired by functional programming concepts (such as map, flatMap, and filter operations)</li>
<li>The lower-level <a href="#the-topology-api">topology API</a> (<em>not</em> recommended for new topologies), based on the original <a href="http://storm.apache.org/about/simple-api.html">Apache Storm</a> API, which requires you to specify spout and bolt logic directly</li>
</ol>

<h2 id="topology-lifecycle">Topology Lifecycle</h2>

<p>Once you&rsquo;ve set up a <a href="../../operators/deployment">Heron cluster</a>, you
can use Heron&rsquo;s <a href="../../operators/heron-cli">CLI tool</a> to manage the entire
lifecycle of a topology, which typically goes through the following stages:</p>

<ol>
<li><a href="../../operators/heron-cli#submitting-a-topology">Submit</a> the topology
to the cluster. The topology is not yet processing streams but is ready to be
activated.</li>
<li><a href="../../operators/heron-cli#activating-a-topology">Activate</a> the
topology. The topology will begin processing streams in accordance with
the topology architecture that you&rsquo;ve created.</li>
<li><a href="../../operators/heron-cli#restarting-a-topology">Restart</a> an
active topology if, for example, you need to update the topology configuration.</li>
<li><a href="../../operators/heron-cli#deactivating-a-topology">Deactivate</a> the
topology. Once deactivated, the topology will stop processing but
remain running in the cluster.</li>
<li><a href="../../operators/heron-cli#killing-a-topology">Kill</a> a topology to completely
remove it from the cluster.  It is no longer known to the Heron cluster and
can no longer be activated. Once killed, the only way to run that topology is
to re-submit and re-activate it.</li>
</ol>

<h2 id="logical-plan">Logical Plan</h2>

<p>A topology&rsquo;s <strong>logical plan</strong> is analagous to a database <a href="https://en.wikipedia.org/wiki/Query_plan">query
plan</a> in that it maps out the basic
operations associated with a topology. Here&rsquo;s an example logical plan for the
example Streamlet API topology <a href="#streamlet-api-example">below</a>:</p>

<p><img src="https://www.lucidchart.com/publicSegments/view/4e6e1ede-45f1-471f-b131-b3ecb7b7c3b5/image.png" alt="Topology logical Plan" /></p>

<p>Whether you use the <a href="#the-heron-streamlet-api">Heron Streamlet API</a> or the <a href="#the-topology-api">topology
API</a>, Heron automatically transforms the processing logic that
you create into both a logical plan and a <a href="#physical-plan">physical plan</a>.</p>

<h2 id="physical-plan">Physical Plan</h2>

<p>A topology&rsquo;s <strong>physical plan</strong> is related to its logical plan but with the
crucial difference that a physical plan determines the &ldquo;physical&rdquo; execution
logic of a topology, i.e. how topology processes are divided between containers. Here&rsquo;s a
basic visual representation of a
physical plan:</p>

<p><img src="https://www.lucidchart.com/publicSegments/view/5c2fe0cb-e4cf-4192-9416-b1b64b5ce958/image.png" alt="Topology Physical Plan" /></p>

<p>In this example, a Heron topology consists of two <a href="#spouts">spout</a> and five
different <a href="#bolts">bolts</a> (each of which has multiple instances) that have automatically
been distributed between five different containers.</p>

<h2 id="window-operations">Window operations</h2>

<p><strong>Windowed computations</strong> gather results from a topology or topology component within a specified finite time frame rather than, say, on a per-tuple basis.</p>

<p>Here are some examples of window operations:</p>

<ul>
<li>Counting how many customers have purchased a product during each one-hour period in the last 24 hours.</li>
<li>Determining which player in an online game has the highest score within the last 1000 computations.</li>
</ul>

<h3 id="sliding-windows">Sliding windows</h3>

<p><strong>Sliding windows</strong> are windows that overlap, as in this figure:</p>

<p><img src="https://www.lucidchart.com/publicSegments/view/57d2fcbb-591b-4403-9258-e5b8e1e25de2/image.png" alt="Sliding time window" /></p>

<p>For sliding windows, you need to specify two things:</p>

<ol>
<li>The length or duration of the window (length if the window is a <a href="#count-windows">count window</a>, duration if the window is a <a href="#time-windows">time window</a>).</li>
<li>The sliding interval, which determines when the window slides, i.e. at what point during the current window the new window begins.</li>
</ol>

<p>In the figure above, the duration of the window is 10 seconds, while the sliding interval is 5 seconds. Each new window begins five seconds into the current window.</p>

<blockquote>
<p>With sliding time windows, data can be processed in more than one window. Tuples 3, 4, and 5 above are processed in both window 1 and window 2 while tuples 6, 7, and 8 are processed in both window 2 and window 3.</p>
</blockquote>

<p>Setting the duration of a window to 16 seconds and the sliding interval to 12 seconds would produce this window arrangement:</p>

<p><img src="https://www.lucidchart.com/publicSegments/view/44bd4835-a692-44e6-a5d8-8e47151e3167/image.png" alt="Sliding time window with altered time interval" /></p>

<p>Here, the sliding interval determines that a new window is always created 12 seconds into the current window.</p>

<h3 id="tumbling-windows">Tumbling windows</h3>

<p><strong>Tumbling windows</strong> are windows that don&rsquo;t overlap, as in this figure:</p>

<p><img src="https://www.lucidchart.com/publicSegments/view/881f99ee-8f93-448f-a178-b9f72dce6491/image.png" alt="Tumbling time window" /></p>

<p>Tumbling windows don&rsquo;t overlap because a new window doesn&rsquo;t begin until the current window has elapsed. For tumbling windows, you only need to specify the length or duration of the window but <em>no sliding interval</em>.</p>

<blockquote>
<p>With tumbling windows, data are <em>never</em> processed in more than one window because the windows never overlap.</p>
</blockquote>

<h3 id="count-windows">Count windows</h3>

<p><strong>Count windows</strong> are specified on the basis of the number of operations rather than a time interval. A count window of 100 would mean that a window would elapse after 100 tuples have been processed, <em>with no relation to clock time</em>.</p>

<p>With count windows, this scenario (for a count window of 50) would be completely normal:</p>

<table>
<thead>
<tr>
<th align="left">Window</th>
<th align="left">Tuples processed</th>
<th align="left">Clock time</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">1</td>
<td align="left">50</td>
<td align="left">10 seconds</td>
</tr>

<tr>
<td align="left">2</td>
<td align="left">50</td>
<td align="left">12 seconds</td>
</tr>

<tr>
<td align="left">3</td>
<td align="left">50</td>
<td align="left">1 hour, 12 minutes</td>
</tr>

<tr>
<td align="left">4</td>
<td align="left">50</td>
<td align="left">5 seconds</td>
</tr>
</tbody>
</table>

<h3 id="time-windows">Time windows</h3>

<p><strong>Time windows</strong> differ from <a href="#count-windows">count windows</a> because you need to specify a time duration (in seconds) rather than a number of tuples processed.</p>

<p>With time windows, this scenario (for a time window of 30 seconds) would be completely normal:</p>

<table>
<thead>
<tr>
<th align="left">Window</th>
<th align="left">Tuples processed</th>
<th align="left">Clock time</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">1</td>
<td align="left">150</td>
<td align="left">30 seconds</td>
</tr>

<tr>
<td align="left">2</td>
<td align="left">50</td>
<td align="left">30 seconds</td>
</tr>

<tr>
<td align="left">3</td>
<td align="left">0</td>
<td align="left">30 seconds</td>
</tr>

<tr>
<td align="left">4</td>
<td align="left">375</td>
<td align="left">30 seconds</td>
</tr>
</tbody>
</table>

<h3 id="all-window-types">All window types</h3>

<p>As explained above, windows differ along two axes: sliding (overlapping) vs. tumbling (non overlapping) and count vs. time. This produces four total types:</p>

<ol>
<li><a href="#sliding-windows">Sliding</a> <a href="#time-windows">time</a> windows</li>
<li><a href="#sliding-windows">Sliding</a> <a href="#count-windows">count</a> windows</li>
<li><a href="#tumbling-windows">Tumbling</a> <a href="#time-windows">time</a> windows</li>
<li><a href="#tumbling-windows">Tumbling</a> <a href="#count-windows">count</a> windows</li>
</ol>

<h2 id="resource-allocation-with-the-heron-streamlet-api">Resource allocation with the Heron Streamlet API</h2>

<p>When creating topologies using the Streamlet API, there are three types of resources that you can specify:</p>

<ol>
<li>The number of containers into which the topology&rsquo;s <a href="#physical-plan">physical plan</a> will be split</li>
<li>The total number of CPUs allocated to be used by the topology</li>
<li>The total amount of RAM allocated to be used by the topology</li>
</ol>

<p>For each topology, there are defaults for each resource type:</p>

<table>
<thead>
<tr>
<th align="left">Resource</th>
<th align="left">Default</th>
<th align="left">Minimum</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">Number of containers</td>
<td align="left">1</td>
<td align="left">1</td>
</tr>

<tr>
<td align="left">CPU</td>
<td align="left">1.0</td>
<td align="left">1.0</td>
</tr>

<tr>
<td align="left">RAM</td>
<td align="left">512 MB</td>
<td align="left">192MB</td>
</tr>
</tbody>
</table>

<h3 id="allocating-resources-to-topologies">Allocating resources to topologies</h3>

<p>For instructions on allocating resources to topologies, see the language-specific documentation for:</p>

<ul>
<li><a href="../../developers/java/streamlet-api#containers-and-resources">Java</a></li>
</ul>

<h2 id="spouts">Spouts</h2>

<p>A Heron <strong>spout</strong> is a source of streams, responsible for emitting
<a href="../../developers/data-model">tuples</a> into the topology. A spout may, for
example, read data from a Kestrel queue or read tweets from the Twitter API and
emit tuples to one or more bolts.</p>

<p>Information on building spouts can be found in <a href="../../developers/java/spouts">Building
Spouts</a>.</p>

<h2 id="bolts">Bolts</h2>

<p>A Heron <strong>bolt</strong> consumes streams of
<a href="../../developers/data-model">tuples</a> emitted by spouts and performs some
set of user-defined processing operations on those tuples, which may include
performing complex stream transformations, performing storage operations,
aggregating multiple streams into one, emitting tuples to other bolts within the
topology, and much more.</p>

<p>Information on building bolts can be found in <a href="../../developers/java/bolts">Building
Bolts</a>.</p>

<h2 id="data-model">Data Model</h2>

<p>Heron&rsquo;s original topology API required using a fundamentally tuple-driven data model.
You can find more information in <a href="../../developers/data-model">Heron&rsquo;s Data Model</a>.</p>
</article></section></div></div></div></main><script src="https://code.jquery.com/jquery-2.2.1.min.js"></script><script src="https://twitter.github.io/heron/js/bootstrap.js"></script><script src="https://twitter.github.io/heron/js/jquery.scrollTo.js"></script><script src="https://twitter.github.io/heron/js/app.min.js"></script><script type="text/javascript">
$('pre code').each(function() {
  console.log(this);
  this.innerHTML = this.innerHTML.replace(/\$\s/g, function(matched) {
    return `<span class=\"clp\">${matched}</span>`;
  });
});
</script></body></html>